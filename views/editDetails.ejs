<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- bootstrap css -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

  <link rel="stylesheet" href="css/editDetails.css">

  <title>Student-teacher system</title>
</head>

<body>
  <h1>Students' Detail</h1>

  <table class="table">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">Class</th>
        <th scope="col">Section</th>
        <th scope="col">Assigned Teacher</th>
        <th scope="col">Edit button</th>
      </tr>
    </thead>
    <tbody>
      <% if(studentsDetail.length >0){ %>
      <% studentsDetail.forEach(function(item){ %>
      <tr>
        <td><%= item.name%></td>
        <td><%= item.email%></td>
        <td><%= item.class%></td>
        <td><%= item.section%></td>
        <td><%= item.assignedTeacher%></td>
        <td><button type="button" name="edit" onClick="fillForm('<%= item.name%>', '<%= item.email%>', '<%= item.class%>', '<%= item.section%>', '<%= item.assignedTeacher%>', '<%= item._id%>')">Edit your profile here</button></td>
      </tr>
      <% })}else{ %>
      <tr>
        <td colspan="6">No Record Found</td>
      </tr>
      <% } %>
    </tbody>
  </table>

  <form action="/editStudentDetail" method="POST" id="student-form">
    <label for="name">Student Name:</label>
    <input type="text" id="name" name="name"><br>

    <label for="email">Student Email:</label>
    <input type="email" id="email" name="email"><br>

    <label for="class">Select your class:</label>
    <select id="classStudy" name="class">
      <option disabled selected value> -- Select Class -- </option>
      <option value="8th">8th</option>
      <option value="9th">9th</option>
    </select>
    <br>

    <label for="section">Select your section:</label>
    <select id="sectionStudy" name="section">
      <option disabled selected value> -- Select Section -- </option>
      <option value="A">A</option>
      <option value="B">B</option>
      <option value="C">C</option>
    </select>
    <br>

    <label for="teacherSelection">Select your teacher:</label>
    <select id="assignedTeacher" name="selectedTeacher">
      <option disabled selected value> -- Select Teacher -- </option>
      <% teachersDetail.forEach(function(item){ %>
      <option><%= item.name%></option>
      <% }) %>
    </select>

    <input type="hidden" id="studentID" name="studentID" value="">
    <br>
    <button type="submit" id="save-btn">Save Changes</button>
  </form>


  <script>
    function fillForm(name, email, classStudy, section, assignedTeacher, id) {
      document.getElementById("name").value = name;
      document.getElementById("email").value = email;
      document.getElementById("classStudy").value = classStudy;
      document.getElementById("sectionStudy").value = section;
      document.getElementById("assignedTeacher").value = assignedTeacher;
      document.getElementById("studentID").value = id;
    }
  </script>

  <a class="btn btn-primary btn-sm" id="filter" href="/">Go to home</a>
  <a class="btn btn-primary btn-sm" id="edit" href="/filter">Explore Filter Options</a>
</body>

</html>
